<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mobile_navigation"
    app:startDestination="@id/navigation_landing">

    <!-- Landing/Splash Screen -->
    <fragment
        android:id="@+id/navigation_landing"
        android:name="com.example.outfitsync.ui.landing.LandingPageFragment"
        android:label="@string/app_name"
        tools:layout="@layout/fragment_landing_page">
        <action
            android:id="@+id/action_landing_to_login"
            app:destination="@id/navigation_login"
            app:popUpTo="@id/navigation_landing"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Authentication Flow -->
    <fragment
        android:id="@+id/navigation_login"
        android:name="com.example.outfitsync.ui.auth.LoginFragment"
        android:label="@string/title_login"
        tools:layout="@layout/fragment_login">
        <action
            android:id="@+id/action_login_to_signup"
            app:destination="@id/navigation_signup" />

        <!-- ACTION DITAMBAH: Untuk login pertama atau streak baru -->
        <action
            android:id="@+id/action_login_to_streak"
            app:destination="@id/navigation_streak_weekly"
            app:popUpTo="@id/navigation_login"
            app:popUpToInclusive="true" />

        <!-- ACTION DITAMBAH: Untuk login biasa (ke Home) -->
        <action
            android:id="@+id/action_login_to_home"
            app:destination="@id/navigation_home"
            app:popUpTo="@id/navigation_login"
            app:popUpToInclusive="true" />
    </fragment>

    <fragment
        android:id="@+id/navigation_signup"
        android:name="com.example.outfitsync.ui.auth.SignupFragment"
        android:label="@string/title_create_account"
        tools:layout="@layout/fragment_signup">
        <action
            android:id="@+id/action_signup_to_verify"
            app:destination="@id/navigation_verify_email" />
        <action
            android:id="@+id/action_signup_to_login"
            app:destination="@id/navigation_login" />
    </fragment>

    <fragment
        android:id="@+id/navigation_verify_email"
        android:name="com.example.outfitsync.ui.auth.VerifyEmailFragment"
        android:label="@string/title_verify_email"
        tools:layout="@layout/fragment_verify_email">
        <action
            android:id="@+id/action_verify_to_verified"
            app:destination="@id/navigation_email_verified" />
    </fragment>

    <fragment
        android:id="@+id/navigation_email_verified"
        android:name="com.example.outfitsync.ui.auth.EmailVerifiedFragment"
        android:label="@string/title_email_verified"
        tools:layout="@layout/fragment_email_verified">

        <!-- ACTION DITAMBAH: Untuk menyelesaikan sign-up, langsung ke Streak -->
        <action
            android:id="@+id/action_verified_to_streak"
            app:destination="@id/navigation_streak_weekly"
            app:popUpTo="@id/navigation_landing"
            app:popUpToInclusive="true" />

        <action
            android:id="@+id/action_verified_to_calendar"
            app:destination="@id/navigation_calendar"
            app:popUpTo="@id/navigation_landing"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Main App Flow - Calendar -->
    <fragment
        android:id="@+id/navigation_calendar"
        android:name="com.example.outfitsync.ui.calendar.CalendarFragment"
        android:label="@string/title_calendar"
        tools:layout="@layout/fragment_calendar">
        <action
            android:id="@+id/action_calendar_to_daily_view"
            app:destination="@id/navigation_calendar_daily" />
        <action
            android:id="@+id/action_calendar_to_monthly_view"
            app:destination="@id/navigation_calendar_monthly" />
        <action
            android:id="@+id/action_calendar_to_add"
            app:destination="@id/navigation_add_to_calendar" />
    </fragment>

    <fragment
        android:id="@+id/navigation_calendar_daily"
        android:name="com.example.outfitsync.ui.calendar.CalendarDailyViewFragment"
        android:label="@string/title_calendar_daily"
        tools:layout="@layout/fragment_calendar_daily_view">
        <action
            android:id="@+id/action_daily_to_calendar"
            app:destination="@id/navigation_calendar"
            app:popUpTo="@id/navigation_calendar"
            app:popUpToInclusive="false" />
    </fragment>

    <fragment
        android:id="@+id/navigation_calendar_monthly"
        android:name="com.example.outfitsync.ui.calendar.CalendarMonthlyViewFragment"
        android:label="@string/title_calendar_monthly"
        tools:layout="@layout/fragment_calendar_monthly_view">
        <action
            android:id="@+id/action_monthly_to_calendar"
            app:destination="@id/navigation_calendar"
            app:popUpTo="@id/navigation_calendar"
            app:popUpToInclusive="false" />
    </fragment>

    <fragment
        android:id="@+id/navigation_add_to_calendar"
        android:name="com.example.outfitsync.ui.calendar.AddToCalendarFragment"
        android:label="@string/title_add_to_calendar"
        tools:layout="@layout/fragment_add_to_calendar">
        <action
            android:id="@+id/action_add_to_calendar_done"
            app:destination="@id/navigation_calendar"
            app:popUpTo="@id/navigation_calendar"
            app:popUpToInclusive="false" />
    </fragment>

    <!-- Home Fragment (Main Menu) -->
    <fragment
        android:id="@+id/navigation_home"
        android:name="com.example.outfitsync.ui.home.HomeFragment"
        android:label="@string/title_home"
        tools:layout="@layout/fragment_home">
        <action
            android:id="@+id/action_home_to_mix_match"
            app:destination="@id/navigation_mix_match" />
    </fragment>

    <!-- Wardrobe -->
    <fragment
        android:id="@+id/navigation_wardrobe"
        android:name="com.example.outfitsync.ui.wardrobe.WardrobeFragment"
        android:label="@string/title_wardrobe"
        tools:layout="@layout/fragment_wardrobe">
        <action
            android:id="@+id/action_wardrobe_to_favorites"
            app:destination="@id/navigation_favorites" />
    </fragment>

    <!-- Shuffle -->
    <fragment
        android:id="@+id/navigation_shuffle"
        android:name="com.example.outfitsync.ui.shuffle.ShuffleFragment"
        android:label="@string/title_shuffle"
        tools:layout="@layout/fragment_home">
        <action
            android:id="@+id/action_shuffle_to_result"
            app:destination="@id/navigation_outfit_result" />
        <action
            android:id="@+id/action_shuffle_to_streak"
            app:destination="@id/navigation_streak_weekly" />
    </fragment>

    <!-- Profile -->
    <fragment
        android:id="@+id/navigation_profile"
        android:name="com.example.outfitsync.ui.profile.ProfileFragment"
        android:label="@string/title_profile"
        tools:layout="@layout/fragment_profile">
        <action
            android:id="@+id/action_profile_to_edit"
            app:destination="@id/navigation_edit_profile" />
    </fragment>

    <!-- Camera Flow -->
    <fragment
        android:id="@+id/navigation_camera_upload"
        android:name="com.example.outfitsync.ui.camera.CameraUploadFragment"
        android:label="@string/title_upload"
        tools:layout="@layout/fragment_camera_upload">
        <action
            android:id="@+id/action_upload_to_scan"
            app:destination="@id/navigation_camera_scan" />
    </fragment>

    <fragment
        android:id="@+id/navigation_camera_scan"
        android:name="com.example.outfitsync.ui.camera.CameraScanFragment"
        android:label="@string/title_scan"
        tools:layout="@layout/fragment_camera_scan">
        <action
            android:id="@+id/action_scan_to_scan_outfit"
            app:destination="@id/navigation_scan_outfit" />
    </fragment>

    <fragment
        android:id="@+id/navigation_scan_outfit"
        android:name="com.example.outfitsync.ui.scan.ScanOutfitFragment"
        android:label="@string/title_scan_outfit"
        tools:layout="@layout/fragment_scan_outfit">
        <action
            android:id="@+id/action_scan_outfit_to_wardrobe"
            app:destination="@id/navigation_wardrobe"
            app:popUpTo="@id/navigation_camera_upload"
            app:popUpToInclusive="true" />
    </fragment>

    <!-- Mix and Match Flow -->
    <fragment
        android:id="@+id/navigation_mix_match"
        android:name="com.example.outfitsync.ui.mixmatch.MixMatchFragment"
        android:label="@string/title_mix_match"
        tools:layout="@layout/fragment_mix_and_match">
        <action
            android:id="@+id/action_mix_match_to_edit"
            app:destination="@id/navigation_mix_match_edit" />
    </fragment>

    <fragment
        android:id="@+id/navigation_mix_match_edit"
        android:name="com.example.outfitsync.ui.mixmatch.MixMatchEditFragment"
        android:label="@string/title_mix_match_edit"
        tools:layout="@layout/fragment_mix_match_edit">
        <action
            android:id="@+id/action_mix_match_edit_to_result"
            app:destination="@id/navigation_outfit_result" />
    </fragment>

    <fragment
        android:id="@+id/navigation_outfit_result"
        android:name="com.example.outfitsync.ui.result.OutfitResultFragment"
        android:label="@string/title_outfit_result"
        tools:layout="@layout/fragment_outfit_result">
        <action
            android:id="@+id/action_result_to_calendar"
            app:destination="@id/navigation_calendar"
            app:popUpTo="@id/navigation_calendar"
            app:popUpToInclusive="false" />
        <action
            android:id="@+id/action_result_to_add_calendar"
            app:destination="@id/navigation_add_to_calendar" />
    </fragment>

    <!-- Other Screens -->
    <fragment
        android:id="@+id/navigation_favorites"
        android:name="com.example.outfitsync.ui.favorites.FavoritesFragment"
        android:label="@string/title_favorites"
        tools:layout="@layout/fragment_favorites" />

    <fragment
        android:id="@+id/navigation_edit_profile"
        android:name="com.example.outfitsync.ui.profile.EditProfileFragment"
        android:label="@string/title_edit_profile"
        tools:layout="@layout/fragment_edit_profile" />

    <fragment
        android:id="@+id/navigation_streak_weekly"
        android:name="com.example.outfitsync.ui.streak.StreakWeeklyFragment"
        android:label="@string/title_streak"
        tools:layout="@layout/fragment_streak_weekly">

        <!-- ACTION DITAMBAH: Kembali ke Home dari Streak -->
        <action
            android:id="@+id/action_streak_to_home"
            app:destination="@id/navigation_home"
            app:popUpTo="@id/navigation_home"
            app:popUpToInclusive="true" />

        <action
            android:id="@+id/action_streak_to_shuffle"
            app:destination="@id/navigation_shuffle"
            app:popUpTo="@id/navigation_shuffle"
            app:popUpToInclusive="false" />
    </fragment>

</navigation>